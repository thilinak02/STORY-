<!DOCTYPE html>
<html lang="si">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>STORY Messenger</title>
    <script src="https://www.gstatic.com/firebasejs/9.17.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.17.1/firebase-database-compat.js"></script>
    <style>
        :root { --wa-green: #25D366; --wa-dark: #075E54; --bg: #ffffff; }
        body { font-family: 'Segoe UI', sans-serif; margin: 0; background: var(--bg); overflow: hidden; }
        
        /* Header */
        header { background: white; padding: 15px; display: flex; justify-content: space-between; align-items: center; position: sticky; top: 0; z-index: 100; }
        header h2 { color: var(--wa-dark); margin: 0; }

        /* Navigation */
        .nav-bar { position: fixed; bottom: 0; width: 100%; background: #f7f7f7; display: flex; border-top: 1px solid #ddd; height: 70px; }
        .nav-item { flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; font-size: 12px; color: #555; cursor: pointer; }
        .nav-item.active { color: #000; font-weight: bold; }
        .nav-icon { font-size: 20px; margin-bottom: 4px; }

        /* Pages */
        .page { display: none; height: calc(100vh - 130px); overflow-y: auto; padding: 10px; }
        .active-page { display: block; }

        /* Chat List Item */
        .chat-item { display: flex; align-items: center; padding: 12px; border-bottom: 0.5px solid #eee; cursor: pointer; }
        .avatar { width: 50px; height: 50px; border-radius: 50%; background: #ddd; margin-right: 15px; object-fit: cover; }
        .chat-info { flex: 1; }
        .chat-info h4 { margin: 0; font-size: 16px; }
        .chat-info p { margin: 5px 0 0; font-size: 13px; color: #666; }

        /* Floating Button */
        .fab { position: fixed; bottom: 90px; right: 20px; background: var(--wa-green); width: 55px; height: 55px; border-radius: 18px; display: flex; align-items: center; justify-content: center; color: white; font-size: 24px; box-shadow: 0 4px 10px rgba(0,0,0,0.2); }
    </style>
</head>
<body>

    <header>
        <h2>WhatsApp</h2>
        <div style="font-size: 20px;">üîç üì∑ ‚ãÆ</div>
    </header>

    <div id="chats" class="page active-page">
        <div class="chat-item" onclick="openPrivateChat('Podi Akka')">
            <img src="https://via.placeholder.com/50" class="avatar">
            <div class="chat-info"><h4>Podi Akka</h4><p>Lassanai kohida giye</p></div>
        </div>
        <div class="chat-item" onclick="openPrivateChat('My Wife')">
            <img src="https://via.placeholder.com/50" class="avatar">
            <div class="chat-info"><h4>My Wife</h4><p>Draft: ‡∂ö‡∑ú‡∑Ñ‡∑ú‡∂∏‡∂Ø ‡∂î‡∂∫‡∑è‡∂ß?</p></div>
        </div>
        <div class="fab">üí¨</div>
    </div>

    <div id="updates" class="page">
        <h3>Status</h3>
        <div class="chat-item">
            <div class="avatar" style="border: 2px solid var(--wa-green);"></div>
            <div class="chat-info"><h4>My Status</h4><p>Tap to add status update</p></div>
        </div>
        <h3 style="margin-top: 20px;">Recent Stories</h3>
        <div id="story-container"></div>
    </div>

    <div id="settings" class="page">
        <div style="text-align: center; padding: 20px;">
            <img src="https://via.placeholder.com/100" class="avatar" style="width:100px; height:100px; margin: 0 auto;">
            <h2 id="display-name">Thilina Kumara</h2>
            <p>Current mood üòä</p>
            <input type="text" id="name-input" placeholder="‡∂±‡∂∏ ‡∑Ä‡∑ô‡∂±‡∑É‡∑ä ‡∂ö‡∂ª‡∂±‡∑ä‡∂±" style="width: 80%; padding: 10px; border-radius: 10px; border: 1px solid #ddd;">
            <button onclick="saveName()" style="margin-top: 10px; padding: 10px 20px; background: var(--wa-green); border: none; color: white; border-radius: 20px;">Save Profile</button>
        </div>
    </div>

    <div class="nav-bar">
        <div class="nav-item active" onclick="changeTab('chats', this)"><span class="nav-icon">üí¨</span>Chats</div>
        <div class="nav-item" onclick="changeTab('updates', this)"><span class="nav-icon">‚≠ï</span>Updates</div>
        <div class="nav-item" onclick="changeTab('communities', this)"><span class="nav-icon">üë•</span>Communities</div>
        <div class="nav-item" onclick="changeTab('settings', this)"><span class="nav-icon">‚öôÔ∏è</span>Settings</div>
    </div>

    <script>
        function changeTab(pageId, el) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active-page'));
            document.getElementById(pageId).classList.add('active-page');
            document.querySelectorAll('.nav-item').forEach(t => t.classList.remove('active'));
            el.classList.add('active');
        }

        function saveName() {
            const name = document.getElementById('name-input').value;
            if(name) {
                document.getElementById('display-name').innerText = name;
                alert("‡∂¥‡∑ä‚Äç‡∂ª‡∑ù‡∑Ü‡∂∫‡∑í‡∂Ω‡∑ä ‡∂ë‡∂ö ‡∂Ö‡∂¥‡∑ä‡∂©‡∑ö‡∂ß‡∑ä ‡∑Ä‡∑î‡∂´‡∑è!");
            }
        }

        function openPrivateChat(user) {
            alert(user + " ‡∑É‡∂∏‡∂ü ‡∂¥‡∑û‡∂Ø‡∑ä‡∂ú‡∂Ω‡∑í‡∂ö‡∑Ä ‡∂∏‡∑ê‡∑É‡∑ö‡∂¢‡∑ä ‡∂ö‡∑í‡∂ª‡∑ì‡∂∏‡∂ß ‡∂∏‡∂∏ ‡∂ä‡∑Ö‡∂ü‡∂ß ‡∂ö‡∑ù‡∂©‡∑ä ‡∂ë‡∂ö ‡∂Ø‡∑ô‡∂±‡∑ä‡∂±‡∂∏‡∑ä!");
        }
    </script>
</body>
</html>
